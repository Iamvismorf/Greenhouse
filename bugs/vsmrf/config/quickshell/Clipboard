import QtQuick
import Quickshell
import qs.services
import qs.custom
import QtQuick.Layouts
import QtQuick.Effects
import QtQuick.Controls
import qs.config.utilWidgets
import Quickshell.Widgets
import "clipboard"
        Rectangle {
            id: root
            focus: true
            property string keyBuffer: ""
            Timer {
                id: keyBufferTimer
                interval: 500
                onTriggered: root.keyBuffer = ""
            }
            Keys.onPressed: e => {
                root.keyBuffer += e.text;
                keyBufferTimer.restart();
                if (root.keyBuffer == "gi") {
                    search.forceActiveFocus();
                    root.keyBuffer = "";
                    keyBufferTimer.stop();
                    e.accepted = true;
                }
                if (e.key === Qt.Key_J) {
                    list.incrementCurrentIndex();
                } else if (e.key === Qt.Key_K) {
                    list.decrementCurrentIndex();
                }
            }
            anchors.centerIn: parent
            color: "#141414"
            width: 400
            height: 600
            ColumnLayout {
                anchors.fill: parent
                spacing: 20
                TextField {
                    id: search
                    Layout.fillWidth: true
                    height: 50
                }
                ListView {
                    id: list
                    // focus: true
                    model: 10
                    Layout.fillWidth: true
                    Layout.fillHeight: true
                    spacing: 12
                    highlight: Rectangle {
                        color: "lightBlue"
                        width: 400
                    }
                    delegate: Item {
                        width: parent.width
                        height: 50
                        MouseArea {
                            anchors.fill: parent
                            onClicked: list.currentIndex = index
                        }
                        Text {
                            text: index
                            anchors.centerIn: parent
                            color: "white"
                        }
                    }
                    keyNavigationEnabled: true
                }
            }
        }

